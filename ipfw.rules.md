# サーバが自機を守るipfwルールの例

- 2026-02-21 ごろ書いた

## あらすじ

FreeBSD 14.3R で httpd や DNS リゾルバを動かすサーバを建てたとして、
このサーバ用の基本的なアクセスリストを ipfw で書く場合のひとつの例を
考える。
一つの例なので、これで問題ないかどうかは各自の環境と照らし合わせてください。

## サーバの構成

```
           Internet
	       |
	      HGW
	       | 192.168.1.1
	       |
	+------+--------------+------+  192.168.1/24
	|                     |
	|                     |
	| 192.168.1.100       |
       サーバ                他のノード
```



  - インターネット側へつながるインタフェース re0 で次のサーバを提供しているものとする。
    - DNS リゾルバ (53/tcp, 53/udp)
    - NTP (123/udp)
    - Web サーバ (80/tcp, 443/tcp)
    - SSH サーバ (22/tcp)
  - このサーバはホームゲートウェイ(HGW)の内側にあって、HGW の









